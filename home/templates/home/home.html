{% extends 'base.html' %}
{% block content %}
<section class="summary-section">
  <h1>ERP-Dashboard</h1>

  {# Optional debug line for troubleshooting #}
  {# <p><strong>User Email:</strong> {{ user_email }}</p> #}

  {% if user_email in ["elias@dzignscapeprofessionals.onmicrosoft.com", "admin@dzignscapeprofessionals.onmicrosoft.com"] %}
    <!-- 📦 Project Summary -->
    <div class="card-grid">
      <div class="card">
        <h2>Total Projects</h2>
        <p class="card-value">{{ project_summary.count|default:"0" }}</p>
      </div>
      <div class="card">
        <h3>Project Names</h3>
        {% if project_summary.names %}
          <ul class="card-list">
            {% for name in project_summary.names %}
              <li>{{ name }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No projects found.</p>
        {% endif %}
      </div>
    </div>

    <!-- 👷 Contractor Summary -->
    <div class="card-grid">
      <div class="card">
        <h2>Total Contractors</h2>
        <p class="card-value">{{ contractor_summary.count|default:"0" }}</p>
      </div>
      <div class="card">
        <h3>Contractor Names</h3>
        {% if contractor_summary.names %}
          <ul class="card-list">
            {% for name in contractor_summary.names %}
              <li>{{ name }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No contractors found.</p>
        {% endif %}
      </div>
    </div>
  {% endif %}

  {% if user_email in ["jakir@dzignscapeprofessionals.onmicrosoft.com", "admin@dzignscapeprofessionals.onmicrosoft.com"] %}
    <!-- 🧑‍💼 Customer Summary -->
    <div class="card-grid">
      <div class="card">
        <h2>Total Customers</h2>
        <p class="card-value">{{ customer_summary.count|default:"0" }}</p>
      </div>
      <div class="card">
        <h3>Customer Names</h3>
        {% if customer_summary.names %}
          <ul class="card-list">
            {% for name in customer_summary.names %}
              <li>{{ name }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No customers found.</p>
        {% endif %}
      </div>
    </div>
  {% endif %}
</section>
{% endblock %}

